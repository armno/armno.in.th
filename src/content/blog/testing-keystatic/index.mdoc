---
title: Testing Keystatic
pubDate: '2024-01-01T00:00:00.000Z'
description: alright let's see
language: en
tags:
  - Keystatic
  - Blog
  - CMS
thumbnail: /public/images/testing-keystatic/thumbnail.jpg
---
#### Todo's

- ~~add tags field. probably will be result in another content type in Astro?~~
- ~~add language field. default to en.~~
- ~~deal with published date field / type~~
- ~~test publish field if it works. or even change it to isDraft field.~~
- **create a custom mdoc tag that uses an Astro component.**
  - [https://docs.astro.build/en/guides/integrations-guide/markdoc/#use-astro-components-as-markdoc-tags](https://docs.astro.build/en/guides/integrations-guide/markdoc/#use-astro-components-as-markdoc-tags)
- finally, finalize this post!

---

will Keystatic work for me?

so, okay.

- the post must be a`slug.mdoc`file, not`slug/index.mdoc`file - not true. it can be in its own folder with proper config below.
- `image` in keystatic config must be updated with to keep the images in the same folder with the post mdoc file.

```js
images: {
  directory: 'src/content/blog',
  publicPath: '../../../content/blog/',
},
```

![](../../../content/blog/testing-keystatic/dummy-image.png)

- Post thumbnail: can be uploaded in Keystatic, but now got a problem to use it with Astro's `<Image>` component. The `src` contains just a file name. It also lives inside the `src/content/` folder, meaning it must be imported in JS to use with `src` prop of the Image component.
  - There we go! this can be done in the `field.image` config.

```java
thumbnail: fields.image({
  label: 'Thumbnail',
  directory: 'public/images',
  publicPath: '/public/images',
}),
```

- When the thumbnail is selected, it creates `thumbnail: /public/images/testing-keystatic/thumbnail.png` in the frontmatter of the post. ü§ù

---

- Now i'm trying to convert the `/uses` page to mdoc
- mdoc can be used with only content collections in astro.
  - e.g. Astro [does not support](https://docs.astro.build/en/core-concepts/astro-pages/#supported-page-files) mdoc in pages. :(
- The uses page is a page and not a content collection
- Either I move the uses page to be a content collection, or just leave the page alone and maintain it outside of Keystatic.
  - I choose the 2nd option: do nothing with it.

---

- language and tags field are added easily
- I actually don't need a published or draft field.
- The date and datetime fields are still kind of buggy. It doesn't return a valid date that is compatible with Astro [https://github.com/Thinkmill/keystatic/issues/821](https://github.com/Thinkmill/keystatic/issues/821)
- Custom Markdoc Tag: I created `{% picture %}` tag in mdoc config. It renders well in the page, but not in Keystatic. It seems using DocumentRenderer is what I need to check.
  - Funnily, this code below renders a picture component inside of a code block.

```markdown
{% picture
  src="/images/uses/laptop.jpg"
  alt="2015, 15-inch macbook pro"
  height=900 width=1600 /%}
```
